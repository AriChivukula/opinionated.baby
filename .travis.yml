env:
  globals:
    - TF_VAR_BUILD=$TRAVIS_BUILD_NUMBER
    - PATH=$HOME/.local/bin:$PATH
language: node_js
node_js:
- node
before_install: bash shell/install.sh
jobs:
  include:
  - stage: Actualize
    if: type = api
    script: bash shell/actualize.sh
  - stage: Test
    if: ( type = push ) AND ( branch != master )
    script: bash shell/test.sh
  - stage: Deploy
    if: ( type = push ) AND ( branch = master )
    script: bash shell/deploy.sh
  - stage: Verify
    if: type = pull_request
    script: bash shell/verify.sh
